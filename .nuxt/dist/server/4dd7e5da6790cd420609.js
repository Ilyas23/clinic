exports.ids=[6],exports.modules={142:function(t,e,r){var content=r(173);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=r(3).default;t.exports.__inject__=function(t){n("6c6b2afe",content,!0,t)}},172:function(t,e,r){"use strict";r.r(e);var n=r(142),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},173:function(t,e,r){(t.exports=r(2)(!1)).push([t.i,"form[data-v-126c54b4]{width:600px;margin:5rem auto 0}",""])},186:function(t,e,r){"use strict";r.r(e);var n={layout:"admin",middleware:["admin-auth"],asyncData:async({store:t,params:e})=>({news:await t.dispatch("news/fetchNewsById",e.id)}),mounted(){this.form={...this.news}},data:()=>({previewDialog:!1,form:{title:"",text:""},rules:{text:[{required:!0,message:"Текст не должен быть пустым",trigger:"blur"}],title:[{required:!0,message:"Заголовок не может быть пустым",trigger:"blur"}]}}),methods:{onSubmit(){this.$refs.form.validate(async t=>{if(t)try{this.loading=!0,await this.$store.dispatch("news/update",this.form),this.form.title="",this.form.text="",this.$message.success("Новость сохранена")}catch(t){}finally{this.loading=!1}else this.$message.warning("Форма не валидна")})}}},o=r(1);var component=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("h1",{staticClass:"mb"},[t._v("Редактировать новость")]),t._v(" "),r("el-form-item",{attrs:{label:"Введите заголовок",prop:"title"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("el-form-item",{staticClass:"mb2",attrs:{label:"Текст в формате .md или .html",prop:"text"}},[r("el-input",{attrs:{type:"textarea",resize:"none",rows:10},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1),t._v(" "),r("el-button",{staticClass:"mb",attrs:{type:"success",plain:""},on:{click:function(e){t.previewDialog=!0}}},[t._v("\n    Предпросмотр\n  ")]),t._v(" "),r("el-dialog",{attrs:{title:"Предпросмотр",visible:t.previewDialog},on:{"update:visible":function(e){t.previewDialog=e}}},[r("div",{key:t.form.text},[r("vue-markdown",[t._v(t._s(t.form.text))])],1)]),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit",round:"",loading:t.loading}},[t._v("\n      Сохранить\n    ")])],1)],1)},[],!1,function(t){var e=r(172);e.__inject__&&e.__inject__(t)},"126c54b4","03d85b9a");e.default=component.exports}};
//# sourceMappingURL=4dd7e5da6790cd420609.js.map